<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Grafik.EmployeeSchedulePage">

    <Grid Padding="10" RowDefinitions="Auto,*">
        <!-- Верхняя панель -->
        <Grid ColumnDefinitions="*,Auto" Row="0" VerticalOptions="Center">
            <Label x:Name="EmployeeNameLabel" FontSize="24"
                   VerticalOptions="Center"
                   HorizontalOptions="Start" />

            <StackLayout Orientation="Horizontal" Spacing="10"
                         VerticalOptions="Center" HorizontalOptions="End">
                <Label Text="Список" VerticalOptions="Center"/>
                <Switch x:Name="ViewSwitch" VerticalOptions="Center" />
                <Label Text="Таблица" VerticalOptions="Center"/>
            </StackLayout>
        </Grid>

        <!-- Контент -->
        <Grid Row="1">
            <!-- Режим список -->
            <ScrollView x:Name="ListContainer" IsVisible="True" Opacity="1">
                <CollectionView x:Name="ScheduleListView">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Frame Padding="10"
                                   Margin="5"
                                   HasShadow="True"
                                   BorderColor="{Binding BorderColor}">
                                <StackLayout>
                                    <Label Text="{Binding Date, StringFormat='{0:D}  ({0:ddd})'}"
                                           FontAttributes="Bold"/>
                                    <Label Text="{Binding Worktime}" FontAttributes="Bold"/>
                                    <Label Text="{Binding Shift}" />
                                    <Label Text="{Binding Employees}" />
                                    <Label Text="{Binding DisplayOtherEmployees}"
                                           FontSize="12"
                                           TextColor="Gray" />
                                    <Label Text="{Binding SecondLinePartner}"
                                           FontAttributes="Italic"
                                           TextColor="Green">
                                        <Label.Triggers>
                                            <DataTrigger TargetType="Label"
                                                         Binding="{Binding SecondLinePartner}"
                                                         Value="{x:Null}">
                                                <Setter Property="IsVisible" Value="False"/>
                                            </DataTrigger>
                                            <DataTrigger TargetType="Label"
                                                         Binding="{Binding SecondLinePartner}"
                                                         Value="">
                                                <Setter Property="IsVisible" Value="False"/>
                                            </DataTrigger>
                                        </Label.Triggers>
                                    </Label>
                                </StackLayout>
                            </Frame>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </ScrollView>

            <!-- Режим календарь -->
            <ScrollView x:Name="CalendarContainer" IsVisible="False" Opacity="0">
                <CollectionView x:Name="CalendarView" SelectionMode="Single">
                    <CollectionView.ItemsLayout>
                        <GridItemsLayout Orientation="Vertical" Span="7"/>
                    </CollectionView.ItemsLayout>
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Frame Padding="5" Margin="2"
                                   BackgroundColor="{Binding TileColor}"
                                   BorderColor="{Binding BorderColor}"
                                   CornerRadius="8" HasShadow="True">
                                <StackLayout>
                                    <Label Text="{Binding Date, StringFormat='{0:dd}'}"
                                           HorizontalOptions="Center"
                                           FontSize="18"
                                           FontAttributes="Bold"/>
                                    <Label Text="{Binding Shift}" FontSize="10"
                                           HorizontalOptions="Center"/>
                                </StackLayout>
                            </Frame>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </ScrollView>
        </Grid>
    </Grid>
</ContentPage>
